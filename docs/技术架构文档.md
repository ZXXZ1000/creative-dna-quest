# HOTOåˆ›æ„åŸºå› æµ‹è¯•H5 - æŠ€æœ¯æ–½å·¥æ–‡æ¡£

## 1. æŠ€æœ¯æ¶æ„é€‰å‹

### 1.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ
```
Frontend: HTML5 + CSS3 + åŸç”ŸJavaScript (ES6+)
UIåº“: Swiper.js 4.0.2 (æ»‘å±äº¤äº’)
æ„å»ºå·¥å…·: Webpack 5 + Babel (å¯é€‰ï¼Œç”¨äºä»£ç ä¼˜åŒ–)
CSSé¢„å¤„ç†: Sass/SCSS (å¯é€‰ï¼Œæå‡å¼€å‘æ•ˆç‡)
å›¾æ ‡å­—ä½“: è‡ªå®šä¹‰Icon Font / SVGå›¾æ ‡
```

### 1.2 ç¬¬ä¸‰æ–¹ä¾èµ–
```javascript
// å¿…éœ€ä¾èµ–
- Swiper.js 4.0.2: æ»‘å±æ ¸å¿ƒåº“
- Fastclick: è§£å†³ç§»åŠ¨ç«¯300mså»¶è¿Ÿ (å¯é€‰)

// å·¥å…·åº“ (æŒ‰éœ€å¼•å…¥)
- lodash/debounce: é˜²æŠ–å¤„ç†
- html2canvas: æµ·æŠ¥ç”Ÿæˆ
- qrcode.js: äºŒç»´ç ç”Ÿæˆ
```

### 1.3 æµè§ˆå™¨æ”¯æŒç­–ç•¥
- **ä¸»è¦æ”¯æŒ**: iOS Safari 12+, Android Chrome 70+
- **é™çº§ç­–ç•¥**: ä¸æ”¯æŒçš„æµè§ˆå™¨æ˜¾ç¤ºå‹å¥½æç¤º
- **Polyfill**: æŒ‰éœ€åŠ è½½Promiseã€Array.fromç­‰

## 2. é¡¹ç›®ç»“æ„è®¾è®¡

```
hoto-gene-test/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â”œâ”€â”€ common.css      # å…¬å…±æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ pages.css       # é¡µé¢æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ animations.css  # åŠ¨ç”»æ ·å¼
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.js         # ä¸»é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ quiz.js         # æµ‹è¯•é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ poster.js       # æµ·æŠ¥ç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ utils.js        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ backgrounds/    # èƒŒæ™¯å›¾ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ icons/          # å›¾æ ‡èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ products/       # äº§å“å›¾ç‰‡
â”‚   â”‚   â”‚   â””â”€â”€ logos/          # å“ç‰ŒLogo
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â”œâ”€â”€ questions.json  # é—®é¢˜æ•°æ®
â”‚   â”‚       â””â”€â”€ results.json    # ç»“æœæ•°æ®
â”‚   â”œâ”€â”€ libs/
â”‚   â”‚   â”œâ”€â”€ swiper/             # Swiperåº“æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ vendors/            # å…¶ä»–ç¬¬ä¸‰æ–¹åº“
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ api.js              # APIé…ç½®
â”œâ”€â”€ dist/                       # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ webpack.config.js           # Webpacké…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## 3. å¼€å‘ç¯å¢ƒé…ç½®

### 3.1 åŸºç¡€ç¯å¢ƒ
```bash
# Node.jsç‰ˆæœ¬è¦æ±‚
node -v  # >= 14.0.0
npm -v   # >= 6.0.0

# é¡¹ç›®åˆå§‹åŒ–
mkdir hoto-gene-test
cd hoto-gene-test
npm init -y

# å®‰è£…æ ¸å¿ƒä¾èµ–
npm install swiper@4.0.2
npm install --save-dev webpack webpack-cli webpack-dev-server
npm install --save-dev html-webpack-plugin css-loader style-loader
npm install --save-dev @babel/core @babel/preset-env babel-loader
```

### 3.2 å¼€å‘æœåŠ¡å™¨é…ç½®
```javascript
// webpack.config.js
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  mode: 'development',
  entry: './src/assets/js/main.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: 'bundle.js'
  },
  devServer: {
    contentBase: './dist',
    hot: true,
    port: 3000
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html'
    })
  ],
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: 'babel-loader'
      }
    ]
  }
};
```

## 4. HTMLç»“æ„å®ç°

### 4.1 åŸºç¡€HTMLæ¨¡æ¿
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>HOTO Creative DNA Test</title>
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="./libs/swiper/swiper.min.css">
    <!-- ä¸»æ ·å¼ -->
    <link rel="stylesheet" href="./assets/css/common.css">
    <link rel="stylesheet" href="./assets/css/pages.css">
    <link rel="stylesheet" href="./assets/css/animations.css">
</head>
<body>
    <!-- åŠ è½½åŠ¨ç”» -->
    <div id="loading" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- æ»‘åŠ¨æŒ‡ç¤ºå™¨ -->
    <div class="swipe-indicator">
        <div class="indicator-icon"></div>
    </div>

    <!-- è¿›åº¦æ¡ -->
    <div class="progress-bar">
        <div class="progress-fill"></div>
        <div class="progress-text">Question 1 of 8</div>
    </div>

    <!-- ä¸»æ»‘åŠ¨å®¹å™¨ -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <!-- Page 1: Landing -->
            <div class="swiper-slide" data-page="landing">
                <div class="page-content landing-page">
                    <div class="logo-container">
                        <img src="./assets/images/logos/hoto-logo.png" alt="HOTO" class="hoto-logo">
                    </div>
                    <div class="hero-content">
                        <div class="dna-icon">ğŸ§¬</div>
                        <h1 class="main-title">CREATIVE DNA<br>TEST</h1>
                        <h2 class="sub-title">Discover Your Maker Type</h2>
                        <p class="description">
                            What drives your creativity?<br>
                            Are you a systematic organizer,<br>
                            a visionary innovator, or<br>
                            something entirely different?
                        </p>
                        <button class="start-btn" data-action="start">START TEST</button>
                        <p class="test-info">(8 questions â€¢ 1 minute)</p>
                        <a href="#" class="science-link" data-action="science">THE SCIENCE BEHIND</a>
                        <label class="agreement">
                            <input type="checkbox" checked class="agreement-checkbox">
                            <span class="checkmark"></span>
                            I agree to the terms and conditions
                        </label>
                    </div>
                </div>
            </div>

            <!-- Page 2: Science Behind -->
            <div class="swiper-slide" data-page="science">
                <div class="page-content science-page">
                    <div class="science-icon">ğŸ”¬</div>
                    <h2 class="page-title">THE SCIENCE BEHIND</h2>
                    <div class="science-content">
                        <p>Based on decades of research in creativity psychology, this test identifies your unique creative DNA - the psychological patterns that drive how you approach making, building, and creating.</p>
                        <p>Drawing from <strong>Torrance Creative Thinking Test (1962)</strong> & <strong>Gough Creative Personality Scale (1979)</strong>.</p>
                        <p>Ready to discover your type?</p>
                    </div>
                    <button class="continue-btn" data-action="continue">CONTINUE</button>
                </div>
            </div>

            <!-- Pages 3-10: Questions (åŠ¨æ€ç”Ÿæˆ) -->
            <!-- é—®é¢˜é¡µé¢å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->

            <!-- Page 11: Final Step -->
            <div class="swiper-slide" data-page="final">
                <div class="page-content final-page">
                    <div class="logo-container">
                        <img src="./assets/images/logos/hoto-logo.png" alt="HOTO" class="hoto-logo">
                    </div>
                    <h2 class="page-title">Final Step</h2>
                    <form class="user-form" id="userForm">
                        <div class="form-group">
                            <label for="userName">Your Name:</label>
                            <input type="text" id="userName" name="name" required placeholder="Enter your name">
                        </div>
                        <div class="form-group">
                            <label for="userRegion">Country/Region:</label>
                            <select id="userRegion" name="region" required>
                                <option value="">Select Country/Region</option>
                                <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </select>
                        </div>
                        <button type="submit" class="continue-btn">CONTINUE</button>
                        <label class="agreement">
                            <input type="checkbox" checked class="follow-up-checkbox">
                            <span class="checkmark"></span>
                            Follow up with personalized emails
                        </label>
                    </form>
                    <div class="powered-by">Powered by HOTO</div>
                </div>
            </div>

            <!-- Page 12: Result -->
            <div class="swiper-slide" data-page="result">
                <div class="page-content result-page">
                    <!-- ç»“æœå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- æµ·æŠ¥ç”Ÿæˆå®¹å™¨ -->
    <div id="posterModal" class="poster-modal hidden">
        <div class="poster-content">
            <canvas id="posterCanvas"></canvas>
            <div class="poster-actions">
                <button class="download-btn">Download</button>
                <button class="share-btn">Share</button>
                <button class="close-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="./libs/swiper/swiper.min.js"></script>
    <script src="./assets/js/utils.js"></script>
    <script src="./assets/js/quiz.js"></script>
    <script src="./assets/js/poster.js"></script>
    <script src="./assets/js/main.js"></script>
</body>
</html>
```

## 5. CSSæ ·å¼å®ç°

### 5.1 å…¬å…±æ ·å¼ (common.css)
```css
/* Reset & Base */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    overflow: hidden;
    background: #000;
    color: #fff;
}

/* Swiperæ ·å¼ */
.swiper-container {
    width: 100%;
    height: 100%;
}

.swiper-slide {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* é¡µé¢å†…å®¹å®¹å™¨ */
.page-content {
    width: 100%;
    max-width: 375px;
    padding: 20px;
    text-align: center;
    position: relative;
    z-index: 10;
}

/* æŒ‰é’®æ ·å¼ */
.btn {
    padding: 16px 32px;
    border: none;
    border-radius: 25px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    color: white;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.btn:active {
    transform: scale(0.95);
}

.start-btn, .continue-btn {
    @extend .btn;
    width: 200px;
    margin: 20px auto;
}

/* GPUåŠ é€Ÿ */
.gpu-accelerated {
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    perspective: 1000px;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 375px) {
    .page-content {
        padding: 16px;
    }
    
    .btn {
        padding: 14px 28px;
        font-size: 14px;
    }
}

@media (max-width: 320px) {
    .page-content {
        padding: 12px;
    }
    
    .btn {
        padding: 12px 24px;
        font-size: 13px;
    }
}
```

### 5.2 é¡µé¢æ ·å¼ (pages.css)
```css
/* Landing Page */
.landing-page {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.hoto-logo {
    height: 40px;
    margin-bottom: 40px;
}

.dna-icon {
    font-size: 48px;
    margin-bottom: 20px;
}

.main-title {
    font-size: 28px;
    font-weight: 900;
    line-height: 1.2;
    margin-bottom: 10px;
    background: linear-gradient(45deg, #ffd700, #ffed4a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.sub-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    opacity: 0.9;
}

.description {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 30px;
    opacity: 0.8;
}

.test-info {
    font-size: 12px;
    opacity: 0.7;
    margin-top: 10px;
}

.science-link {
    display: inline-block;
    margin: 20px 0;
    color: #ffd700;
    text-decoration: underline;
    font-size: 14px;
}

/* Agreement Checkbox */
.agreement {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 20px;
    font-size: 12px;
    cursor: pointer;
}

.agreement-checkbox {
    margin-right: 8px;
}

/* Question Pages */
.question-page {
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    color: #333;
}

.question-number {
    font-size: 14px;
    opacity: 0.7;
    margin-bottom: 10px;
}

.question-text {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 40px;
    line-height: 1.4;
}

.options-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 40px;
}

.option-btn {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    border: 2px solid #ddd;
    border-radius: 12px;
    background: white;
    color: #333;
    text-align: left;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 16px;
}

.option-btn:hover {
    border-color: #667eea;
    background: #f8f9fa;
}

.option-btn.selected {
    border-color: #667eea;
    background: #667eea;
    color: white;
    transform: scale(1.02);
}

.option-icon {
    margin-right: 12px;
    font-size: 18px;
}

/* Progress Bar */
.progress-bar {
    position: fixed;
    top: 20px;
    left: 20px;
    right: 20px;
    z-index: 100;
    text-align: center;
}

.progress-fill {
    height: 4px;
    background: linear-gradient(45deg, #ffd700, #ffed4a);
    border-radius: 2px;
    transition: width 0.5s ease;
    width: 0%;
}

.progress-text {
    font-size: 12px;
    margin-top: 8px;
    opacity: 0.8;
}

/* Swipe Indicator */
.swipe-indicator {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
    animation: bounce 2s infinite;
}

.indicator-icon {
    width: 30px;
    height: 50px;
    background: url('./assets/images/icons/swipe-icon.svg') center no-repeat;
    background-size: contain;
    opacity: 0.7;
}

/* Result Page */
.result-page {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.result-card {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 30px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.gene-type {
    font-size: 32px;
    font-weight: 900;
    margin-bottom: 16px;
    background: linear-gradient(45deg, #ffd700, #ffed4a);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.gene-description {
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 30px;
    opacity: 0.9;
}

.result-actions {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.save-btn, .restart-btn {
    @extend .btn;
}

.restart-btn {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.3);
    color: white;
}

/* Loading */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.5s ease;
}

.loading-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-top: 4px solid #ffd700;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
```

### 5.3 åŠ¨ç”»æ ·å¼ (animations.css)
```css
/* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
.swiper-slide-active {
    animation: slideInUp 0.5s ease-out;
}

@keyframes slideInUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* å…ƒç´ è¿›å…¥åŠ¨ç”» */
.fade-in {
    animation: fadeIn 0.6s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* å¼¹è·³åŠ¨ç”» */
@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
    }
    40% {
        transform: translateX(-50%) translateY(-10px);
    }
    60% {
        transform: translateX(-50%) translateY(-5px);
    }
}

/* æŒ‰é’®ç‚¹å‡»åŠ¨ç”» */
.btn-click {
    animation: btnClick 0.1s ease-out;
}

@keyframes btnClick {
    0% { transform: scale(1); }
    50% { transform: scale(0.95); }
    100% { transform: scale(1); }
}

/* é€‰é¡¹é€‰ä¸­åŠ¨ç”» */
.option-select {
    animation: optionSelect 0.3s ease-out;
}

@keyframes optionSelect {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1.02); }
}

/* è¿›åº¦æ¡åŠ¨ç”» */
.progress-update {
    animation: progressUpdate 0.5s ease-out;
}

@keyframes progressUpdate {
    from {
        width: var(--prev-width, 0%);
    }
    to {
        width: var(--current-width, 0%);
    }
}
```

## 6. JavaScriptæ ¸å¿ƒé€»è¾‘

### 6.1 ä¸»å…¥å£æ–‡ä»¶ (main.js)
```javascript
// main.js
class HOTOGeneTest {
    constructor() {
        this.swiper = null;
        this.currentQuestionIndex = 0;
        this.answers = [];
        this.userInfo = {};
        this.geneScores = {
            MAKER: 0,
            TIDY: 0,
            ILLUMA: 0,
            REFORM: 0,
            NOMAD: 0,
            VISUAL: 0
        };
        
        this.init();
    }
    
    async init() {
        await this.loadData();
        this.initSwiper();
        this.bindEvents();
        this.generateQuestionPages();
        this.hideLoading();
    }
    
    async loadData() {
        try {
            // åŠ è½½é—®é¢˜æ•°æ®
            const questionsResponse = await fetch('./assets/data/questions.json');
            this.questions = await questionsResponse.json();
            
            // åŠ è½½ç»“æœæ•°æ®
            const resultsResponse = await fetch('./assets/data/results.json');
            this.results = await resultsResponse.json();
            
            // åŠ è½½åœ°åŒºæ•°æ®
            const regionsResponse = await fetch('./assets/data/regions.json');
            this.regions = await regionsResponse.json();
            
        } catch (error) {
            console.error('Failed to load data:', error);
            this.showError('Failed to load test data. Please refresh and try again.');
        }
    }
    
    initSwiper() {
        this.swiper = new Swiper('.swiper-container', {
            direction: 'vertical',
            allowTouchMove: true,
            followFinger: true,
            threshold: 50,
            speed: 400,
            on: {
                slideChange: () => {
                    this.onSlideChange();
                },
                touchStart: () => {
                    this.onTouchStart();
                },
                touchEnd: () => {
                    this.onTouchEnd();
                }
            }
        });
    }
    
    bindEvents() {
        // å¼€å§‹æµ‹è¯•æŒ‰é’®
        document.querySelector('[data-action="start"]')?.addEventListener('click', () => {
            this.startTest();
        });
        
        // ç§‘å­¦ä¾æ®é“¾æ¥
        document.querySelector('[data-action="science"]')?.addEventListener('click', (e) => {
            e.preventDefault();
            this.showScience();
        });
        
        // ç»§ç»­æŒ‰é’®
        document.querySelector('[data-action="continue"]')?.addEventListener('click', () => {
            this.continueToQuestions();
        });
        
        // è¡¨å•æäº¤
        document.getElementById('userForm')?.addEventListener('submit', (e) => {
            e.preventDefault();
            this.submitUserInfo();
        });
        
        // é˜²æ­¢é»˜è®¤çš„æ»‘åŠ¨è¡Œä¸ºåœ¨æŸäº›é¡µé¢
        document.addEventListener('touchmove', (e) => {
            if (this.shouldPreventScroll()) {
                e.preventDefault();
            }
        }, { passive: false });
    }
    
    startTest() {
        this.addButtonClickAnimation(event.target);
        
        // æ£€æŸ¥åè®®æ˜¯å¦åŒæ„
        const agreementChecked = document.querySelector('.agreement-checkbox').checked;
        if (!agreementChecked) {
            this.showError('Please agree to the terms and conditions to continue.');
            return;
        }
        
        // ç›´æ¥è·³è½¬åˆ°é—®é¢˜é¡µé¢ï¼Œè·³è¿‡ç§‘å­¦ä¾æ®é¡µ
        setTimeout(() => {
            this.swiper.slideTo(2); // è·³åˆ°ç¬¬ä¸€ä¸ªé—®é¢˜é¡µé¢
            this.updateProgress();
        }, 200);
    }
    
    showScience() {
        this.swiper.slideTo(1); // è·³åˆ°ç§‘å­¦ä¾æ®é¡µé¢
    }
    
    continueToQuestions() {
        this.addButtonClickAnimation(event.target);
        setTimeout(() => {
            this.swiper.slideTo(2); // è·³åˆ°ç¬¬ä¸€ä¸ªé—®é¢˜é¡µé¢
            this.updateProgress();
        }, 200);
    }
    
    generateQuestionPages() {
        const wrapper = document.querySelector('.swiper-wrapper');
        
        this.questions.forEach((question, index) => {
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.setAttribute('data-page', `question-${index + 1}`);
            
            slide.innerHTML = `
                <div class="page-content question-page">
                    <div class="question-number">Question ${index + 1} of ${this.questions.length}</div>
                    <h2 class="question-text">${question.text}</h2>
                    <div class="options-container">
                        ${question.options.map((option, optionIndex) => `
                            <button class="option-btn" data-question="${index}" data-option="${optionIndex}">
                                <span class="option-icon">${option.icon}</span>
                                <span class="option-text">${option.text}</span>
                            </button>
                        `).join('')}
                    </div>
                    <div class="powered-by">Powered by HOTO</div>
                </div>
            `;
            
            // æ’å…¥åˆ°æœ€åä¸€é¡µä¹‹å‰
            const lastSlide = wrapper.lastElementChild;
            wrapper.insertBefore(slide, lastSlide.previousElementSibling);
            
            // ç»‘å®šé€‰é¡¹ç‚¹å‡»äº‹ä»¶
            slide.querySelectorAll('.option-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    this.selectOption(e.currentTarget);
                });
            });
        });
    }
    
    selectOption(button) {
        const questionIndex = parseInt(button.dataset.question);
        const optionIndex = parseInt(button.dataset.option);
        
        // æ·»åŠ é€‰ä¸­åŠ¨ç”»
        button.classList.add('option-select');
        
        // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
        const questionContainer = button.closest('.swiper-slide');
        questionContainer.querySelectorAll('.option-btn').forEach(btn => {
            btn.classList.remove('selected');
        });
        
        // æ ‡è®°å½“å‰é€‰é¡¹ä¸ºé€‰ä¸­
        button.classList.add('selected');
        
        // è®°å½•ç­”æ¡ˆ
        this.recordAnswer(questionIndex, optionIndex);
        
        // 1ç§’åè‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¡µ
        setTimeout(() => {
            this.nextQuestion();
        }, 1000);
    }
    
    recordAnswer(questionIndex, optionIndex) {
        this.answers[questionIndex] = optionIndex;
        
        // æ ¹æ®è¯„åˆ†è§„åˆ™è®¡ç®—åŸºå› å¾—åˆ†
        const scoring = this.questions[questionIndex].scoring[optionIndex];
        Object.keys(scoring).forEach(gene => {
            this.geneScores[gene] += scoring[gene];
        });
        
        console.log('Current scores:', this.geneScores);
    }
    
    nextQuestion() {
        this.currentQuestionIndex++;
        
        if (this.currentQuestionIndex < this.questions.length) {
            // ç»§ç»­ä¸‹ä¸€ä¸ªé—®é¢˜
            this.swiper.slideNext();
            this.updateProgress();
        } else {
            // æ‰€æœ‰é—®é¢˜å®Œæˆï¼Œè·³è½¬åˆ°ä¿¡æ¯æ”¶é›†é¡µé¢
            this.swiper.slideTo(this.swiper.slides.length - 2); // å€’æ•°ç¬¬äºŒé¡µæ˜¯ä¿¡æ¯æ”¶é›†é¡µ
        }
    }
    
    updateProgress() {
        const progressFill = document.querySelector('.progress-fill');
        const progressText = document.querySelector('.progress-text');
        
        if (this.currentQuestionIndex < this.questions.length) {
            const progress = ((this.currentQuestionIndex + 1) / this.questions.length) * 100;
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `Question ${this.currentQuestionIndex + 1} of ${this.questions.length}`;
        }
    }
    
    submitUserInfo() {
        const form = document.getElementById('userForm');
        const formData = new FormData(form);
        
        this.userInfo = {
            name: formData.get('name'),
            region: formData.get('region'),
            followUp: document.querySelector('.follow-up-checkbox').checked,
            timestamp: new Date().toISOString()
        };
        
        // éªŒè¯è¡¨å•
        if (!this.userInfo.name.trim()) {
            this.showError('Please enter your name.');
            return;
        }
        
        if (!this.userInfo.region) {
            this.showError('Please select your country/region.');
            return;
        }
        
        // æ˜¾ç¤ºç»“æœé¡µé¢
        this.showResult();
    }
    
    showResult() {
        // è®¡ç®—æœ€ç»ˆåŸºå› ç±»å‹
        const finalGene = this.calculateFinalGene();
        
        // ç”Ÿæˆç»“æœé¡µé¢å†…å®¹
        this.generateResultPage(finalGene);
        
        // è·³è½¬åˆ°ç»“æœé¡µé¢
        this.swiper.slideTo(this.swiper.slides.length - 1);
        
        // éšè—è¿›åº¦æ¡å’Œæ»‘åŠ¨æŒ‡ç¤ºå™¨
        document.querySelector('.progress-bar').style.display = 'none';
        document.querySelector('.swipe-indicator').style.display = 'none';
        
        // å‘é€æ•°æ®åˆ°åç«¯ï¼ˆå¦‚æœéœ€è¦ï¼‰
        this.submitData();
    }
    
    calculateFinalGene() {
        // æ‰¾åˆ°å¾—åˆ†æœ€é«˜çš„åŸºå› ç±»å‹
        let maxScore = -1;
        let finalGene = 'MAKER'; // é»˜è®¤å€¼
        
        Object.keys(this.geneScores).forEach(gene => {
            if (this.geneScores[gene] > maxScore) {
                maxScore = this.geneScores[gene];
                finalGene = gene;
            }
        });
        
        return finalGene;
    }
    
    generateResultPage(geneType) {
        const resultData = this.results[geneType];
        const resultSlide = document.querySelector('[data-page="result"]');
        
        resultSlide.innerHTML = `
            <div class="page-content result-page">
                <div class="logo-container">
                    <img src="./assets/images/logos/hoto-logo.png" alt="HOTO" class="hoto-logo">
                </div>
                <div class="result-card fade-in">
                    <p class="result-intro">According to Torrance Test (1962) & Gough Scale (1979), Your</p>
                    <h1 class="hotogene-title">HOTOGENEğŸ§¬ is:</h1>
                    <h2 class="gene-type">${resultData.nickname}</h2>
                    <div class="gene-subtitle">${resultData.subtitle}</div>
                    <p class="gene-description">${resultData.description}</p>
                    <p class="creative-power">@${this.userInfo.name}'s Creative Superpower is ${resultData.superpower}</p>
                    <div class="result-actions">
                        <button class="save-btn" onclick="geneTest.generatePoster()">SAVE RESULT</button>
                        <button class="restart-btn" onclick="geneTest.restart()">RESTART</button>
                    </div>
                </div>
                <div class="powered-by">Powered by HOTO</div>
            </div>
        `;
    }
    
    async submitData() {
        try {
            const data = {
                userInfo: this.userInfo,
                answers: this.answers,
                geneScores: this.geneScores,
                finalGene: this.calculateFinalGene(),
                timestamp: new Date().toISOString()
            };
            
            // å‘é€åˆ°åç«¯API
            const response = await fetch('/api/submit-test', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            
            if (!response.ok) {
                throw new Error('Failed to submit data');
            }
            
            console.log('Data submitted successfully');
            
        } catch (error) {
            console.error('Failed to submit data:', error);
            // å¯ä»¥æ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œä½†ä¸å½±å“ç”¨æˆ·ä½“éªŒ
        }
    }
    
    // å·¥å…·æ–¹æ³•
    addButtonClickAnimation(button) {
        button.classList.add('btn-click');
        setTimeout(() => {
            button.classList.remove('btn-click');
        }, 100);
    }
    
    showError(message) {
        // ç®€å•çš„é”™è¯¯æç¤ºå®ç°
        alert(message);
        // åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™é‡Œåº”è¯¥æ˜¾ç¤ºæ›´ä¼˜é›…çš„é”™è¯¯æç¤º
    }
    
    hideLoading() {
        const loading = document.getElementById('loading');
        loading.classList.add('hidden');
        setTimeout(() => {
            loading.style.display = 'none';
        }, 500);
    }
    
    shouldPreventScroll() {
        // åœ¨è¡¨å•é¡µé¢æˆ–ç»“æœé¡µé¢å¯èƒ½éœ€è¦é˜»æ­¢é»˜è®¤æ»‘åŠ¨
        const currentSlide = this.swiper?.activeIndex;
        return false; // æ ¹æ®å®é™…éœ€è¦è°ƒæ•´
    }
    
    onSlideChange() {
        const activeSlide = this.swiper.slides[this.swiper.activeIndex];
        const pageName = activeSlide.dataset.page;
        
        // æ ¹æ®é¡µé¢ç±»å‹æ›´æ–°UIçŠ¶æ€
        this.updateUIForPage(pageName);
    }
    
    updateUIForPage(pageName) {
        const progressBar = document.querySelector('.progress-bar');
        const swipeIndicator = document.querySelector('.swipe-indicator');
        
        if (pageName === 'result') {
            progressBar.style.display = 'none';
            swipeIndicator.style.display = 'none';
        } else if (pageName.startsWith('question-')) {
            progressBar.style.display = 'block';
            swipeIndicator.style.display = 'none';
        } else {
            progressBar.style.display = 'none';
            swipeIndicator.style.display = 'block';
        }
    }
    
    generatePoster() {
        // è°ƒç”¨æµ·æŠ¥ç”ŸæˆåŠŸèƒ½
        PosterGenerator.generate(this.userInfo, this.calculateFinalGene(), this.results);
    }
    
    restart() {
        // é‡ç½®æ‰€æœ‰çŠ¶æ€
        this.currentQuestionIndex = 0;
        this.answers = [];
        this.userInfo = {};
        this.geneScores = {
            MAKER: 0,
            TIDY: 0,
            ILLUMA: 0,
            REFORM: 0,
            NOMAD: 0,
            VISUAL: 0
        };
        
        // é‡ç½®UI
        document.querySelector('.progress-bar').style.display = 'none';
        document.querySelector('.swipe-indicator').style.display = 'block';
        
        // è·³è½¬åˆ°é¦–é¡µ
        this.swiper.slideTo(0);
    }
    
    onTouchStart() {
        // å¤„ç†è§¦æ‘¸å¼€å§‹äº‹ä»¶
    }
    
    onTouchEnd() {
        // å¤„ç†è§¦æ‘¸ç»“æŸäº‹ä»¶
    }
}

// åˆå§‹åŒ–åº”ç”¨
let geneTest;
document.addEventListener('DOMContentLoaded', () => {
    geneTest = new HOTOGeneTest();
});

// æš´éœ²åˆ°å…¨å±€ï¼Œä¾›HTMLä¸­çš„onclickä½¿ç”¨
window.geneTest = geneTest;
```

### 6.2 æµ‹è¯•é€»è¾‘ (quiz.js)
```javascript
// quiz.js - æµ‹è¯•ç›¸å…³çš„é€»è¾‘å¤„ç†

class QuizEngine {
    constructor() {
        this.scoringMatrix = this.initScoringMatrix();
    }
    
    initScoringMatrix() {
        // æ ¹æ®PRDä¸­çš„è¯„åˆ†è¡¨å»ºç«‹è¯„åˆ†çŸ©é˜µ
        return {
            0: { // Q1: Your ideal Saturday morning starts with...
                0: { TIDY: 2 },              // Organizing & planning work
                1: { ILLUMA: 2 },            // Lounging at home
                2: { NOMAD: 2 }              // Heading outdoors
            },
            1: { // Q2: Your laptop starts overheating...
                0: { MAKER: 2 },             // Open it up
                1: { REFORM: 1, MAKER: 1 },  // Research first
                2: { ILLUMA: 2 }             // Quick restart
            },
            2: { // Q3: Your phone's photo library is mostly filled with...
                0: { TIDY: 2 },              // Organized work pics
                1: { ILLUMA: 2 },            // Sunsets & nature beauty
                2: { NOMAD: 2 }              // Random life moments
            },
            3: { // Q4: You see a cool DIY project online...
                0: { MAKER: 2 },             // Save it with detailed plans
                1: { REFORM: 2 },            // Imagine your own version
                2: { VISUAL: 2 }             // Try it now
            },
            4: { // Q5: You're assembling IKEA furniture...
                0: { MAKER: 1, TIDY: 1 },    // Follow instructions exactly
                1: { REFORM: 2 },            // Add personal modifications
                2: { VISUAL: 2 }             // Make it Instagram-worthy
            },
            5: { // Q6: If you were a vlogger, you'd most want to share...
                0: { TIDY: 2 },              // Step-by-step tutorials
                1: { MAKER: 1, REFORM: 1 },  // Creation process
                2: { VISUAL: 1, ILLUMA: 1 }  // Perfectly styled moments
            },
            6: { // Q7: Your shopping style is...
                0: { MAKER: 1, TIDY: 1 },    // Research & plan first
                1: { NOMAD: 2 },             // Buy what sparks joy
                2: { ILLUMA: 1, VISUAL: 1 }  // Get the trendy stuff
            },
            7: { // Q8: You're stuck in an elevator for 30 minutes...
                0: { REFORM: 2 },            // Try to fix it yourself
                1: { NOMAD: 2 },             // Chat with strangers inside
                2: { VISUAL: 2 }             // Think & plan stuff
            }
        };
    }
    
    calculateScore(questionIndex, optionIndex) {
        return this.scoringMatrix[questionIndex][optionIndex] || {};
    }
    
    calculateFinalResult(geneScores) {
        // æ‰¾åˆ°å¾—åˆ†æœ€é«˜çš„åŸºå› ç±»å‹
        let maxScore = -1;
        let topGenes = [];
        
        Object.keys(geneScores).forEach(gene => {
            if (geneScores[gene] > maxScore) {
                maxScore = geneScores[gene];
                topGenes = [gene];
            } else if (geneScores[gene] === maxScore) {
                topGenes.push(gene);
            }
        });
        
        // å¦‚æœæœ‰å¤šä¸ªåŸºå› ç±»å‹å¾—åˆ†ç›¸åŒï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº
        if (topGenes.length > 1) {
            const priority = ['MAKER', 'VISUAL', 'REFORM', 'TIDY', 'ILLUMA', 'NOMAD'];
            return topGenes.reduce((prev, current) => {
                return priority.indexOf(prev) < priority.indexOf(current) ? prev : current;
            });
        }
        
        return topGenes[0];
    }
    
    validateAnswers(answers, totalQuestions) {
        // éªŒè¯ç­”æ¡ˆå®Œæ•´æ€§
        if (answers.length !== totalQuestions) {
            return {
                valid: false,
                message: 'Please answer all questions.'
            };
        }
        
        // æ£€æŸ¥æ˜¯å¦æœ‰æ— æ•ˆç­”æ¡ˆ
        for (let i = 0; i < answers.length; i++) {
            if (answers[i] === undefined || answers[i] === null) {
                return {
                    valid: false,
                    message: `Question ${i + 1} is not answered.`
                };
            }
        }
        
        return { valid: true };
    }
    
    getGeneTypeInfo(geneType, results) {
        return results[geneType] || results['MAKER']; // é»˜è®¤è¿”å›MAKERç±»å‹
    }
}

// æ•°æ®éªŒè¯å·¥å…·
class DataValidator {
    static validateUserName(name) {
        if (!name || name.trim().length === 0) {
            return { valid: false, message: 'Name is required.' };
        }
        
        if (name.trim().length < 2) {
            return { valid: false, message: 'Name must be at least 2 characters.' };
        }
        
        if (name.trim().length > 20) {
            return { valid: false, message: 'Name must be less than 20 characters.' };
        }
        
        // æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦
        const nameRegex = /^[a-zA-Z\s\u4e00-\u9fa5]+$/;
        if (!nameRegex.test(name.trim())) {
            return { valid: false, message: 'Name can only contain letters and spaces.' };
        }
        
        return { valid: true };
    }
    
    static validateRegion(region) {
        if (!region || region.trim().length === 0) {
            return { valid: false, message: 'Please select your country/region.' };
        }
        
        return { valid: true };
    }
}

// è¿›åº¦ç®¡ç†å™¨
class ProgressManager {
    constructor() {
        this.totalQuestions = 8;
        this.currentQuestion = 0;
    }
    
    updateProgress(currentQuestion) {
        this.currentQuestion = currentQuestion;
        
        const progressFill = document.querySelector('.progress-fill');
        const progressText = document.querySelector('.progress-text');
        
        if (progressFill && progressText) {
            const percentage = (this.currentQuestion / this.totalQuestions) * 100;
            progressFill.style.width = `${percentage}%`;
            progressText.textContent = `Question ${this.currentQuestion + 1} of ${this.totalQuestions}`;
            
            // æ·»åŠ è¿›åº¦æ›´æ–°åŠ¨ç”»
            progressFill.classList.add('progress-update');
            setTimeout(() => {
                progressFill.classList.remove('progress-update');
            }, 500);
        }
    }
    
    hide() {
        const progressBar = document.querySelector('.progress-bar');
        if (progressBar) {
            progressBar.style.display = 'none';
        }
    }
    
    show() {
        const progressBar = document.querySelector('.progress-bar');
        if (progressBar) {
            progressBar.style.display = 'block';
        }
    }
    
    reset() {
        this.currentQuestion = 0;
        this.updateProgress(0);
    }
}

// æš´éœ²åˆ°å…¨å±€
window.QuizEngine = QuizEngine;
window.DataValidator = DataValidator;
window.ProgressManager = ProgressManager;
```

### 6.3 å·¥å…·å‡½æ•° (utils.js)
```javascript
// utils.js - é€šç”¨å·¥å…·å‡½æ•°

class Utils {
    // é˜²æŠ–å‡½æ•°
    static debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
    
    // èŠ‚æµå‡½æ•°
    static throttle(func, limit) {
        let inThrottle;
        return function() {
            const args = arguments;
            const context = this;
            if (!inThrottle) {
                func.apply(context, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        };
    }
    
    // æ£€æµ‹ç§»åŠ¨è®¾å¤‡
    static isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    
    // æ£€æµ‹å¾®ä¿¡ç¯å¢ƒ
    static isWeChat() {
        return /micromessenger/i.test(navigator.userAgent);
    }
    
    // è·å–è®¾å¤‡ä¿¡æ¯
    static getDeviceInfo() {
        const ua = navigator.userAgent;
        return {
            isMobile: this.isMobile(),
            isWeChat: this.isWeChat(),
            isIOS: /iPad|iPhone|iPod/.test(ua),
            isAndroid: /Android/.test(ua),
            isSafari: /Safari/.test(ua) && !/Chrome/.test(ua),
            isChrome: /Chrome/.test(ua),
            screenWidth: window.screen.width,
            screenHeight: window.screen.height,
            viewportWidth: window.innerWidth,
            viewportHeight: window.innerHeight
        };
    }
    
    // åŠ¨ç”»å·¥å…·
    static addAnimation(element, animationClass, duration = 300) {
        element.classList.add(animationClass);
        setTimeout(() => {
            element.classList.remove(animationClass);
        }, duration);
    }
    
    // è§¦è§‰åé¦ˆ (å¦‚æœæ”¯æŒ)
    static vibrate(pattern = [100]) {
        if ('vibrate' in navigator) {
            navigator.vibrate(pattern);
        }
    }
    
    // å¹³æ»‘æ»šåŠ¨åˆ°å…ƒç´ 
    static scrollToElement(element, offset = 0) {
        const elementPosition = element.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - offset;
        
        window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
        });
    }
    
    // æ ¼å¼åŒ–æ—¥æœŸ
    static formatDate(date) {
        const options = { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        };
        return date.toLocaleDateString('en-US', options);
    }
    
    // ç”Ÿæˆå”¯ä¸€ID
    static generateId() {
        return Date.now().toString(36) + Math.random().toString(36).substr(2);
    }
    
    // æ·±æ‹·è´å¯¹è±¡
    static deepClone(obj) {
        if (obj === null || typeof obj !== "object") {
            return obj;
        }
        
        if (obj instanceof Date) {
            return new Date(obj.getTime());
        }
        
        if (obj instanceof Array) {
            return obj.map(item => this.deepClone(item));
        }
        
        if (typeof obj === "object") {
            const clonedObj = {};
            for (let key in obj) {
                if (obj.hasOwnProperty(key)) {
                    clonedObj[key] = this.deepClone(obj[key]);
                }
            }
            return clonedObj;
        }
    }
    
    // é”™è¯¯å¤„ç†
    static handleError(error, context = '') {
        console.error(`Error in ${context}:`, error);
        
        // å‘é€é”™è¯¯æŠ¥å‘Šåˆ°ç›‘æ§æœåŠ¡
        if (typeof gtag !== 'undefined') {
            gtag('event', 'exception', {
                'description': `${context}: ${error.message}`,
                'fatal': false
            });
        }
    }
    
    // æ€§èƒ½ç›‘æ§
    static trackPerformance(name, startTime) {
        const endTime = performance.now();
        const duration = endTime - startTime;
        
        console.log(`Performance: ${name} took ${duration.toFixed(2)}ms`);
        
        // å‘é€æ€§èƒ½æ•°æ®
        if (typeof gtag !== 'undefined') {
            gtag('event', 'timing_complete', {
                'name': name,
                'value': Math.round(duration)
            });
        }
    }
    
    // æœ¬åœ°å­˜å‚¨å·¥å…·
    static storage = {
        set(key, value) {
            try {
                localStorage.setItem(key, JSON.stringify(value));
                return true;
            } catch (error) {
                console.warn('Failed to save to localStorage:', error);
                return false;
            }
        },
        
        get(key, defaultValue = null) {
            try {
                const item = localStorage.getItem(key);
                return item ? JSON.parse(item) : defaultValue;
            } catch (error) {
                console.warn('Failed to read from localStorage:', error);
                return defaultValue;
            }
        },
        
        remove(key) {
            try {
                localStorage.removeItem(key);
                return true;
            } catch (error) {
                console.warn('Failed to remove from localStorage:', error);
                return false;
            }
        },
        
        clear() {
            try {
                localStorage.clear();
                return true;
            } catch (error) {
                console.warn('Failed to clear localStorage:', error);
                return false;
            }
        }
    };
    
    // ç½‘ç»œçŠ¶æ€æ£€æµ‹
    static checkNetworkStatus() {
        return new Promise((resolve) => {
            const img = new Image();
            const timeout = setTimeout(() => {
                img.onerror = img.onload = null;
                resolve(false);
            }, 3000);
            
            img.onerror = () => {
                clearTimeout(timeout);
                resolve(false);
            };
            
            img.onload = () => {
                clearTimeout(timeout);
                resolve(true);
            };
            
            img.src = './assets/images/logos/hoto-logo.png?' + Date.now();
        });
    }
    
    // å›¾ç‰‡é¢„åŠ è½½
    static preloadImages(urls) {
        return Promise.all(
            urls.map(url => {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.onload = () => resolve(url);
                    img.onerror = () => reject(new Error(`Failed to load image: ${url}`));
                    img.src = url;
                });
            })
        );
    }
    
    // URLå‚æ•°è§£æ
    static getUrlParams() {
        const params = {};
        const searchParams = new URLSearchParams(window.location.search);
        
        for (let [key, value] of searchParams) {
            params[key] = value;
        }
        
        return params;
    }
}

// æ€§èƒ½ç›‘æ§ç±»
class PerformanceMonitor {
    constructor() {
        this.marks = {};
        this.measures = {};
    }
    
    mark(name) {
        this.marks[name] = performance.now();
        if (performance.mark) {
            performance.mark(name);
        }
    }
    
    measure(name, startMark, endMark) {
        const startTime = this.marks[startMark] || 0;
        const endTime = this.marks[endMark] || performance.now();
        const duration = endTime - startTime;
        
        this.measures[name] = duration;
        
        if (performance.measure) {
            performance.measure(name, startMark, endMark);
        }
        
        console.log(`${name}: ${duration.toFixed(2)}ms`);
        return duration;
    }
    
    getReport() {
        return {
            marks: this.marks,
            measures: this.measures,
            navigation: performance.getEntriesByType('navigation')[0],
            resources: performance.getEntriesByType('resource')
        };
    }
}

// é”™è¯¯æ”¶é›†å™¨
class ErrorCollector {
    constructor() {
        this.errors = [];
        this.maxErrors = 50;
        this.init();
    }
    
    init() {
        window.addEventListener('error', (event) => {
            this.collectError({
                type: 'javascript',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                stack: event.error ? event.error.stack : '',
                timestamp: new Date().toISOString()
            });
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            this.collectError({
                type: 'promise',
                message: event.reason.message || event.reason,
                stack: event.reason.stack || '',
                timestamp: new Date().toISOString()
            });
        });
    }
    
    collectError(errorInfo) {
        this.errors.push(errorInfo);
        
        // ä¿æŒé”™è¯¯æ•°é‡åœ¨é™åˆ¶å†…
        if (this.errors.length > this.maxErrors) {
            this.errors.shift();
        }
        
        // å‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
        this.reportError(errorInfo);
    }
    
    reportError(errorInfo) {
        // è¿™é‡Œå¯ä»¥é›†æˆåˆ°é”™è¯¯ç›‘æ§æœåŠ¡ï¼Œå¦‚Sentryç­‰
        console.error('Error collected:', errorInfo);
    }
    
    getErrors() {
        return this.errors;
    }
}

// åˆå§‹åŒ–å·¥å…·
const performanceMonitor = new PerformanceMonitor();
const errorCollector = new ErrorCollector();

// æš´éœ²åˆ°å…¨å±€
window.Utils = Utils;
window.performanceMonitor = performanceMonitor;
window.errorCollector = errorCollector;
```

## 7. æ•°æ®æ–‡ä»¶é…ç½®

### 7.1 é—®é¢˜æ•°æ® (questions.json)
```json
[
    {
        "id": 1,
        "text": "Your ideal Saturday morning starts with...",
        "options": [
            {
                "text": "Organizing & planning work",
                "icon": "ğŸ—‚"
            },
            {
                "text": "Lounging at home",
                "icon": "ğŸ›‹"
            },
            {
                "text": "Heading outdoors",
                "icon": "ğŸ•"
            }
        ],
        "scoring": [
            { "TIDY": 2 },
            { "ILLUMA": 2 },
            { "NOMAD": 2 }
        ]
    },
    {
        "id": 2,
        "text": "Your laptop starts overheating and running super slow...",
        "options": [
            {
                "text": "Open it up",
                "icon": "ğŸ”§"
            },
            {
                "text": "Research first",
                "icon": "ğŸ“š"
            },
            {
                "text": "Quick restart",
                "icon": "ğŸ”„"
            }
        ],
        "scoring": [
            { "MAKER": 2 },
            { "REFORM": 1, "MAKER": 1 },
            { "ILLUMA": 2 }
        ]
    }
    // ... å…¶ä»–6ä¸ªé—®é¢˜
]
```

### 7.2 ç»“æœæ•°æ® (results.json)
```json
{
    "MAKER": {
        "nickname": "THE ASSEMBLER",
        "subtitle": "THE BUILDER",
        "traits": "Logical â€¢ Systematic",
        "description": "You approach creativity like an architect approaches a blueprint - with precision, logic, and systematic thinking. Every project starts with a plan, and every plan leads to something tangible and functional.",
        "superpower": "Building is my way to reach the other side.",
        "quote": "Building is my way to reach the other side.",
        "product": "SNAPBLOCK",
        "productImage": "./assets/images/products/snapblock.png"
    },
    "TIDY": {
        "nickname": "THE GUARDIAN",
        "subtitle": "THE ORGANIZER",
        "traits": "Organized â€¢ Detail-Focused",
        "description": "You find creativity in bringing order to chaos. Your maker space is your sanctuary, and a well-organized toolkit is your weapon of choice. You believe that clear spaces lead to clear minds.",
        "superpower": "Clearing chaos is clearing my mind.",
        "quote": "Clearing chaos is clearing my mind.",
        "product": "Electric Spray",
        "productImage": "./assets/images/products/electric-spray.png"
    }
    // ... å…¶ä»–åŸºå› ç±»å‹
}
```

## 8. éƒ¨ç½²ä¸ä¼˜åŒ–

### 8.1 æ„å»ºä¼˜åŒ–
```bash
# ç”Ÿäº§ç¯å¢ƒæ„å»º
npm run build

# ä»£ç å‹ç¼©å’Œä¼˜åŒ–
- JavaScript: Terserå‹ç¼©
- CSS: cssnanoå‹ç¼©  
- å›¾ç‰‡: imageminä¼˜åŒ–
- HTML: html-minifierå‹ç¼©
```

### 8.2 æ€§èƒ½ä¼˜åŒ–æ¸…å•
- [ ] å›¾ç‰‡æ‡’åŠ è½½å’ŒWebPæ ¼å¼
- [ ] CSS/JSæ–‡ä»¶å‹ç¼©åˆå¹¶
- [ ] å…³é”®CSSå†…è”
- [ ] å­—ä½“é¢„åŠ è½½
- [ ] Service Workerç¼“å­˜
- [ ] CDNåŠ é€Ÿ
- [ ] Gzipå‹ç¼©

### 8.3 ç›‘æ§ä¸åˆ†æ
```javascript
// Google Analyticsé›†æˆ
gtag('config', 'GA_MEASUREMENT_ID');
gtag('event', 'test_started');
gtag('event', 'test_completed', {
    'gene_type': finalGene,
    'completion_time': completionTime
});
```

è¿™ä»½æŠ€æœ¯æ–½å·¥æ–‡æ¡£æä¾›äº†å®Œæ•´çš„å¼€å‘æŒ‡å—ï¼Œä½ å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ¡†æ¶é€æ­¥å®æ–½HOTOåˆ›æ„åŸºå› æµ‹è¯•H5é¡¹ç›®ã€‚éœ€è¦æˆ‘è¯¦ç»†å±•å¼€æŸä¸ªç‰¹å®šéƒ¨åˆ†å—ï¼Ÿ